<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>padaaa</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
    <!-- <script src="js.js"></script> -->
 </head>

  <style>
  .btnsyl{
    border: 0;
    line-height: 2.5;
    padding: 0 20px;
    font-size: 1rem;
    text-align: center;
    color: #fff;
    text-shadow: 1px 1px 1px #000;
    border-radius: 10px;
    background-color: rgba(220, 0, 0, 1);
    background-image: linear-gradient(to top left, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2) 30%, rgba(0, 0, 0, 0));
    box-shadow: inset 2px 2px 3px rgba(255, 255, 255, 0.6), inset -2px -2px 3px rgba(0, 0, 0, 0.6);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 5%
  }
  </style>

<body>

<script>


const JOYSTICK_EPS = 0;

AFRAME.registerComponent("rotation-controls", {
  schema: {
    // Controller 0-3
    controller: { default: 0, oneOf: [0, 1, 2, 3] },

    // Enable/disable features
    enabled: { default: true },

    // Debugging
    debug: { default: false },

    // Rotation sensitivity
    rotationSensitivity: { default: 2.0 },
  },
  init: function () {
    const sceneEl = this.el.sceneEl;
    this.system = sceneEl.systems['tracked-controls-webxr'] || { controllers: [] };
    this._lookVector = new THREE.Vector2();
  },
  tick: function (t, dt) {
    this.updateRotation(dt);
  },

  /*******************************************************************
   * Rotation
   */

  isRotationActive: function () {
    if (!this.data.enabled || !this.isConnected()) return false;

    const joystick = this._lookVector;

    this.getJoystick(joystick);

    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;
  },

  updateRotation: function (dt) {
    //console.log(dt);
    if (!this.isRotationActive()) return;
    //this.el.object3D.rotation.y += 1

    <!-- const lookVector = this._lookVector; -->
    <!-- this.getJoystick(lookVector); -->
    <!-- if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0; -->
    <!-- if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0; -->
    <!-- lookVector.multiplyScalar(this.data.rotationSensitivity * dt / 1000); -->
    <!-- this.el.object3D.rotation.y -= lookVector.x; -->

    const lookVector = this._lookVector;
    this.getJoystick(lookVector);
    var controls = document.querySelector('a-entity[camera]')
    controls.components['look-controls'].pitchObject.rotation.x = lookVector.x
    controls.components['look-controls'].yawObject.rotation.y = lookVector.y
    
    var pad = navigator.getGamepads(); 
    <!-- log.components[value] = "a0: " + pad[0].axes[0]  -->
    <!-- log.components[value] = "a0: "  -->
    
  },

  /**
   * Returns the Gamepad instance attached to the component. If connected,
   * a proxy-controls component may provide access to Gamepad input from a
   * remote device.
   *
   * @return {Gamepad}
   */
  getGamepad: function () {
    const stdGamepad = navigator.getGamepads
      && navigator.getGamepads()[this.data.controller],
      xrController = this.system.controllers[this.data.controller],
      xrGamepad = xrController && xrController.gamepad,
      proxyControls = this.el.sceneEl.components['proxy-controls'],
      proxyGamepad = proxyControls && proxyControls.isConnected()
        && proxyControls.getGamepad(this.data.controller);
    return proxyGamepad || xrGamepad || stdGamepad;
  },

  /**
   * Returns the state of the specified joystick as a THREE.Vector2.
   * @param  {Joystick} role
   * @param  {THREE.Vector2} target
   * @return {THREE.Vector2}
   */
  getJoystick: function (target) {
    <!-- const gamepad = this.getGamepad(); -->
    <!-- if (gamepad.mapping === 'xr-standard') { -->
      <!-- // See: https://github.com/donmccurdy/aframe-extras/issues/307 -->
      <!-- return target.set(gamepad.axes[2], gamepad.axes[3]); -->
    <!-- } else { -->
      <!-- return target.set(gamepad.axes[0], gamepad.axes[1]); -->
    <!-- } -->
    
    const gamepad = this.getGamepad();
    return target.set(gamepad.axes[0], gamepad.axes[1],gamepad.axes[2],gamepad.axes[3]);
  },

  /**
   * Returns true if the gamepad is currently connected to the system.
   * @return {boolean}
   */
  isConnected: function () {
    const gamepad = this.getGamepad();
    return !!(gamepad && gamepad.connected);
  },

  /**
   * Returns a string containing some information about the controller. Result
   * may vary across browsers, for a given controller.
   * @return {string}
   */
  getID: function () {
    return this.getGamepad().id;
  }
});





<!-- text -->
AFRAME.registerComponent('mapping', {

  init: function(){
    
    var pad = navigator.getGamepads(); 
    

    this.el.setAttribute("text", 'value', pad[0].axes);
    this.el.setAttribute('position', "0 0.2 0");
    this.el.setAttribute('rotation', "270 0 0");

  }

})



</script>
  
    <!-- <a-scene　vr-mode-ui="enabled: false" > -->
    <a-scene>

        <a-entity id="rig" rotation="270 0 0" position="0 2 0" rotation-controls="enabed" >
        <a-entity camera look-controls="magicWindowTrackingEnabled: false; touchEnabled: false" >
             <a-cursor fuse=“true” fuse-timeout=“100”></a-cursor>
        </a-entity>
      </a-entity>
      
      <a-text mapping value="not connnected" width=3></a-text>
      
      <a-sphere color="red" radius="0.05" position="0 0 0" shadow="receive: true"
          animation__1="property: components.material.material.color;
          type: color;
          to: blue;
          dur: 200;
          startEvents: mouseenter;"
          
          animation__0="property: components.material.material.color;
          type: color;
          to: red;
          dur: 200;
          startEvents: mouseleave;"
          >
      </a-sphere>
      
      
      <a-sphere color="yellow" radius="0.05" position="1 0 0" shadow="receive: true"
          animation__1="property: components.material.material.color;
          type: color;
          to: blue;
          dur: 200;
          startEvents: mouseenter;"
          
          animation__0="property: components.material.material.color;
          type: color;
          to: yellow;
          dur: 200;
          startEvents: mouseleave;"
          >
      </a-sphere>
      
      <a-sphere color="yellow" radius="0.05" position="0 0 -1" shadow="receive: true"
          animation__1="property: components.material.material.color;
          type: color;
          to: blue;
          dur: 200;
          startEvents: mouseenter;"
          
          animation__0="property: components.material.material.color;
          type: color;
          to: yellow;
          dur: 200;
          startEvents: mouseleave;"
          >
      </a-sphere>
      
     <a-plane position="0 -0.1 0" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>

    </a-scene>

              <!-- <button id="btnid" class="btnsyl">Restart</button> -->

<script>

document.addEventListener("DOMContentLoaded", function(){

let btn = document.getElementById("btnid");

btn.addEventListener('click', () => {
    var controls = document.querySelector('a-entity[camera]')
    controls.components['look-controls'].pitchObject.rotation.x = 0 //- * ( Math.PI / 180 )
    controls.components['look-controls'].yawObject.rotation.y = 0
    controls.setAttribute("position",{x:0, y:0, z:0})
    return;
});

}, false);

</script>


  </body>


</html>

 
